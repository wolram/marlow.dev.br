#!/bin/bash
# Deploy marlow.dev.br to Hostinger
# Copie para deploy.sh e preencha as credenciais:
#   cp deploy.sh.example deploy.sh
#   chmod +x deploy.sh
# NUNCA commite deploy.sh (estÃ¡ no .gitignore)

set -e

REMOTE_USER="seu_usuario_hostinger"
REMOTE_HOST="seu_ip_ou_host"
REMOTE_PORT="65002"
REMOTE_PATH="~/domains/marlow.dev.br/public_html/"
LOCAL_PATH="$(pwd)/"

echo "ðŸš€ Deploying marlow.dev.br to Hostinger..."

rsync -avz \
  --exclude='.DS_Store' \
  --exclude='.claude' \
  --exclude='*.pdf' \
  --exclude='deploy.sh' \
  --exclude='deploy.sh.example' \
  --exclude='.gitignore' \
  --exclude='.git' \
  --exclude='scripts/' \
  --exclude='requirements.txt' \
  -e "ssh -p $REMOTE_PORT" \
  "$LOCAL_PATH" \
  "$REMOTE_USER@$REMOTE_HOST:$REMOTE_PATH"

echo "ðŸ”§ Setting file permissions..."
sftp -P "$REMOTE_PORT" "$REMOTE_USER@$REMOTE_HOST" << EOF
chmod 644 domains/marlow.dev.br/public_html/index.html
chmod 644 domains/marlow.dev.br/public_html/robots.txt
chmod 644 domains/marlow.dev.br/public_html/sitemap.xml
chmod 644 domains/marlow.dev.br/public_html/site.webmanifest
chmod 755 domains/marlow.dev.br/public_html/blog
chmod 644 domains/marlow.dev.br/public_html/blog/*
chmod 755 domains/marlow.dev.br/public_html/nomad
chmod 644 domains/marlow.dev.br/public_html/nomad/*
chmod 755 domains/marlow.dev.br/public_html/assets
chmod 644 domains/marlow.dev.br/public_html/assets/*
chmod 755 domains/marlow.dev.br/public_html/pt
chmod 644 domains/marlow.dev.br/public_html/pt/index.html
chmod 755 domains/marlow.dev.br/public_html/pt/blog
chmod 644 domains/marlow.dev.br/public_html/pt/blog/*
chmod 755 domains/marlow.dev.br/public_html/pt/nomad
chmod 644 domains/marlow.dev.br/public_html/pt/nomad/*
quit
EOF

echo "âœ… Deployment complete!"
echo "ðŸŒ Site live at: https://marlow.dev.br"
